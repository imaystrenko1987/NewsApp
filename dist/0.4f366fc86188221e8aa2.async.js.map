{"version":3,"sources":["webpack:///./src/modules/news-parser.js","webpack:///./src/modules/pagination.js"],"names":["NewsParser","constructor","apiUrl","apiKey","contentElem","document","getElementById","channelElem","recordsCountElem","articleTmpl","init","bindEvents","loadSources","initPagination","paging","Pagination","totalResults","value","getNews","bind","clearContent","innerHTML","setContent","text","onFilterChange","onchange","response","fetch","jsonResult","json","sources","forEach","source","option","createElement","name","id","appendChild","err","message","pageNumber","pageQsParam","articles","length","article","createArticle","articleJson","replaceItems","Map","set","urlToImage","content","title","replacer","templStr","key","replace","className","rest","currentPage","recordsPerPage","searchCallback","paginationDiv","btnNext","btnPrev","pageSpan","pageOfSpan","disabled","numPages","style","display","onclick","nextPage","prevPage","changePage","page","Math","ceil"],"mappings":"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","file":"0.4f366fc86188221e8aa2.async.js","sourcesContent":["import { Pagination } from './pagination'\r\n\r\nexport class NewsParser{\r\n    constructor(apiUrl, apiKey) {\r\n        this.apiUrl = apiUrl;\r\n        this.apiKey = apiKey;\r\n        this.contentElem = document.getElementById(\"rowContainer\");\r\n        this.channelElem =  document.getElementById(\"channel\");\r\n        this.recordsCountElem = document.getElementById(\"recordsCount\");\r\n    }\r\n    \r\n    get articleTmpl() {\r\n        return \"<img class='logo-image {{logoImageClass}}' src='{{urlToImage}}' alt='Logo image'><h2>{{title}}</h2><p>{{content}}</p>\";\r\n    }\r\n    \r\n    init() {\r\n        this.bindEvents();\r\n        this.loadSources();\r\n    }\r\n    \r\n    initPagination(){\r\n        if(!this.paging){\r\n            this.paging = new Pagination(this.totalResults, this.recordsCountElem.value, this.getNews.bind(this));\r\n            this.paging.init();\r\n        }\r\n    }\r\n    \r\n    clearContent(){\r\n        this.contentElem.innerHTML = \"\";\r\n    }\r\n    \r\n    setContent(text){\r\n        this.contentElem.innerHTML = text;\r\n    }\r\n    \r\n    onFilterChange(){\r\n        this.paging = null;\r\n        this.getNews();\r\n    }\r\n    \r\n    bindEvents(){\r\n        this.channelElem.onchange = this.onFilterChange.bind(this);\r\n        this.recordsCountElem.onchange = this.onFilterChange.bind(this);\r\n    }\r\n    \r\n    async loadSources(){\r\n        this.paging = null;\r\n        try {\r\n            const response = await fetch(`${this.apiUrl}/sources?apiKey=${this.apiKey}`);\r\n            const jsonResult = await response.json();\r\n            let channelElem = document.getElementById(\"channel\");\r\n            let sources = jsonResult.sources;\r\n            sources.forEach(source => {\r\n                let option = document.createElement(\"option\");\r\n                option.text = source.name;\r\n                option.value = source.id;\r\n                channelElem.appendChild(option);\r\n            });\r\n            \r\n            await this.getNews();\r\n            \r\n        }\r\n        catch (err){\r\n            this.setContent(jsonResult.message);\r\n            this.initPagination();\r\n        }\r\n            \r\n    }\r\n    \r\n    async getNews(pageNumber){\r\n        this.clearContent();\r\n        let pageQsParam = pageNumber ? `&page=${pageNumber}` : \"\";\r\n        try {\r\n            const response = await fetch(`${this.apiUrl}/everything?apiKey=${this.apiKey}&pageSize=${this.recordsCountElem.value}&sources=${this.channelElem.value}${pageQsParam}`);\r\n            const jsonResult = await response.json();\r\n            this.totalResults = jsonResult.totalResults;\r\n            let articles = jsonResult.articles;\r\n            if(articles.length === 0){\r\n                this.setContent(\"Try another category.\");\r\n                return;\r\n            }\r\n            \r\n            articles.forEach(article => {\r\n                this.createArticle(article);\r\n            });\r\n            this.initPagination();\r\n        }\r\n        catch (err){\r\n            this.setContent(jsonResult.message);\r\n            this.initPagination();\r\n        }\r\n    }\r\n    \r\n    createArticle(articleJson){\r\n        let replaceItems = new Map();\r\n        replaceItems.set(\"{{urlToImage}}\", articleJson.urlToImage ? articleJson.urlToImage : \"\");\r\n        replaceItems.set(\"{{logoImageClass}}\", articleJson.urlToImage ? \"\" : \"hidden\");\r\n        replaceItems.set(\"{{content}}\", articleJson.content ? articleJson.content : \"comming soon...\");\r\n        replaceItems.set(\"{{title}}\", articleJson.title);\r\n        \r\n        let replacer = (templStr) => { \r\n            replaceItems.forEach((value, key) => {\r\n                templStr = templStr.replace(key, value);\r\n            });\r\n            return templStr; \r\n        };\r\n        \r\n        let article = document.createElement(\"div\");\r\n        article.className = \"col-lg-4\";\r\n        article.innerHTML = replacer(this.articleTmpl);\r\n        this.contentElem.appendChild(article);\r\n    }\r\n}","export class Pagination{\r\n    constructor(...rest){\r\n        this.currentPage = 1;\r\n        [this.totalResults, this.recordsPerPage, this.searchCallback] = rest;\r\n    }\r\n    \r\n    init(){\r\n        this.paginationDiv = document.getElementById(\"pagination\");\r\n        this.btnNext = document.getElementById(\"btnNext\");\r\n        this.btnPrev = document.getElementById(\"btnPrev\");\r\n        this.pageSpan = document.getElementById(\"page\");\r\n        this.pageOfSpan = document.getElementById(\"pageOf\");\r\n        this.btnPrev.disabled = true;\r\n         this.btnNext.disabled = this.numPages === 1;\r\n        this.paginationDiv.style.display = !this.totalResults ? \"none\" : \"\";\r\n        this.pageSpan.innerHTML = this.currentPage;\r\n        this.pageOfSpan.innerHTML = this.numPages;\r\n        this.btnNext.onclick = this.nextPage.bind(this);\r\n        this.btnPrev.onclick = this.prevPage.bind(this);\r\n    }\r\n\r\n    prevPage(){\r\n        if (this.currentPage > 1) {\r\n            this.currentPage--;\r\n            this.changePage(this.currentPage);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    nextPage(){\r\n        if (this.currentPage < this.numPages) {\r\n            this.currentPage++;\r\n            this.changePage(this.currentPage);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    changePage(page){\r\n        this.searchCallback(page);\r\n        this.pageSpan.innerHTML = page;\r\n        if (page == 1){\r\n            this.btnPrev.disabled = true;\r\n        } else{\r\n            this.btnPrev.disabled = false;\r\n        }\r\n\r\n        if (page == this.numPages){\r\n            this.btnNext.disabled = true;\r\n        } else{\r\n            this.btnNext.disabled = false;\r\n        }\r\n    }\r\n\r\n    get numPages(){\r\n        return Math.ceil(this.totalResults / this.recordsPerPage);\r\n    }\r\n}"],"sourceRoot":""}